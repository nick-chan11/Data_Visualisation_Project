{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "width": 800,
  "height": 450,
  "title": "Frequency of Domestic Flights across Australia in 2024",
  "projection": {"type": "mercator", "center": [134, -25]},
  "layer": [
    {
      "data": {
        "name": "ocean",
        "url": "https://raw.githubusercontent.com/ncha0085/FIT3179/refs/heads/main/json/output.topojson.json",
        "format": {"type": "topojson", "feature": "ne_110m_ocean"}
      },
      "mark": {"type": "geoshape", "fill": "#aeefff", "stroke": "white"}
    },
    {
      "data": {
        "name": "state_lines",
        "url": "https://raw.githubusercontent.com/ncha0085/FIT3179/refs/heads/main/json/output.topojson.json",
        "format": {"type": "topojson", "feature": "STE_2016_AUST"}
      },
      "mark": {"type": "geoshape", "fill": "white", "stroke": "#aeefff"}
    },
    {
      "data": {
        "name": "graticules_15",
        "url": "https://raw.githubusercontent.com/ncha0085/FIT3179/refs/heads/main/json/output.topojson.json",
        "format": {"type": "topojson", "feature": "ne_110m_graticules_15"}
      },
      "mark": {"type": "geoshape", "fill": "white", "stroke": "grey", "strokeWidth": 0.5}
    },
    {
      "data": {
        "name": "flight_paths",
        "url": "https://raw.githubusercontent.com/ncha0085/FIT3179/refs/heads/main/data/dom_citypairs.csv"
      },
      "transform": [
        {"filter": "datum.Year == 2024"},
        {
          "aggregate": [
            {"op": "sum", "field": "Aircraft_Trips", "as": "Total_Flights"}
          ],
          "groupby": [
            "City1",
            "City2",
            "Longitude_City1",
            "Latitude_City1",
            "Longitude_City2",
            "Latitude_City2"
          ]
        }
      ],
      "mark": {"type": "rule"},
      "encoding": {
        "longitude": {"field": "Longitude_City1", "type": "quantitative"},
        "latitude": {"field": "Latitude_City1", "type": "quantitative"},
        "longitude2": {"field": "Longitude_City2", "type": "quantitative"},
        "latitude2": {"field": "Latitude_City2", "type": "quantitative"},
        "size": {
          "field": "Total_Flights",
          "type": "quantitative",
          "scale": {"range": [1, 10]},
          "legend": {
            "labelFontSize": 14,
            "titleFontSize": 14,
            "symbolSize": 2000,
            "symbolType": "square"
          }
        },
        "color": {
          "field": "Total_Flights",
          "type": "quantitative",
          "title": "Number of Aircraft Trips",
          "scale": {"scheme": "oranges"}
        },
        "tooltip": [
          {"field": "City1", "type": "nominal", "title": "Origin City"},
          {"field": "City2", "type": "nominal", "title": "Destination City"},
          {
            "field": "Total_Flights",
            "type": "quantitative",
            "title": "No. of Flights"
          }
        ]
      }
    },
    {
      "data": {
        "url": "https://raw.githubusercontent.com/ncha0085/FIT3179/refs/heads/main/data/aus_city_coordinates.csv"
      },
      "mark": {
        "type": "text",
        "align": "left",
        "baseline": "bottom",
        "dx": 4,
        "fontSize": 16,
        "color": "black"
      },
      "encoding": {
        "longitude": {"field": "lng", "type": "quantitative"},
        "latitude": {"field": "lat", "type": "quantitative"},
        "text": {"field": "city", "type": "nominal"}
      },
      "transform": [{"aggregate": [], "groupby": ["city", "lat", "lng"]}]
    },
    {
      "data": {
        "url": "https://raw.githubusercontent.com/ncha0085/FIT3179/refs/heads/main/data/aus_city_coordinates.csv"
      },
      "mark": {"type": "point", "color": "red", "size": 100},
      "encoding": {
        "longitude": {"field": "lng", "type": "quantitative"},
        "latitude": {"field": "lat", "type": "quantitative"},
        "tooltip": {"field": "city", "type": "nominal", "title": "City"}
      }
    }
  ]
}
